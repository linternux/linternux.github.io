I"í&<p><a href="http://192.168.1.88/wp-content/uploads/2009/07/Yum.png"><img loading="lazy" class="alignleft size-full wp-image-680" title="Yum" src="http://192.168.1.88/wp-content/uploads/2009/07/Yum.png" alt="Yum" width="185" height="70" /></a>This is a first of a series of two articles dedicated to the â€œyumâ€ program. In this first article, we will mainly look at the configuration files. In the next article, we will look at some advance usage, that will help us in administrating our servers.Â  As always, will build our article, in a way that we can come back to it and use it as a reference if we need some information about â€œyumâ€. We will concentrate on the command line version of â€œyumâ€, but I would like mention that there is a graphical version called â€œyumexâ€ that I would recommend. It is not the fastest one, but it is simple to use and it work.Â  Visit theÂ  <a href="http://www.yum-extender.org/blog/" title="yumex home page">â€œyumexâ€ home page</a>, you can aloso <a href="http://linternux.com/download/yumex/yumex-2.0.5-3.el5.noarch.rpm" title="Download yumex rpm">download the RedHat/Centos 5 rpm</a> from here.</p>

<h3 id="main-configuration-file-etcyumconf">Main configuration file (/etc/yum.conf)</h3>

<p>We can say that â€œyumâ€ configuration break in two parts, the main configuration file yum.confÂ  located in the /etc directory and the /etc/yum.repos.d directory that contains separated files for each repository that â€œyumâ€ can connect to, for updating/installing our system. Below is a modified version of the yum.conf file that include comment for every option line, so we could use it as a reference. I think all options, alongÂ  with the comments included are self explanatory .</p>

<pre># The Main section must exist for yum to do anything
<strong><span style="color: #0000ff;">[main]</span></strong>

# Directory where packages are downloaded
<span style="color: #0000ff;"><strong>cachedir=/var/cache/yum</strong></span>

# 0=Remove packages &amp; headers after they are install/update
# 1=Keep downloaded packages after update
<span style="color: #0000ff;"><strong>keepcache=0</strong></span>

# Debug Level. Valid numbers are 0-10, default is 2
<strong><span style="color: #0000ff;">debuglevel=2</span></strong>

# Where yum log file is located
<span style="color: #0000ff;"><strong>logfile=/var/log/yum.log</strong></span>

# Distribution Package Name (Fedora=fedora-release, RedHat/Centos=redhat-release)
<span style="color: #0000ff;"><strong>distroverpkg=redhat-release</strong></span>

# 1=Complaint when package aleady install is installed, 0=not tolerant
# For example, if you request to install foo, bar and baz and baz is installed;
# yum won't error out complaining that baz is already installedt
<span style="color: #0000ff;"><strong>tolerant=1</strong></span>

# 1=Only update the architectures of packages that is installed, 0=Override Check
<span style="color: #0000ff;"><strong>exactarch=1</strong></span>

# Let yum determine if package is obsolete during update (1=Activate 0=Deactivate)
<span style="color: #0000ff;"><strong>obsoletes=1</strong></span>

# Confirms that all packages are cryptographically verified
<span style="color: #0000ff;"><strong>gpgcheck=1</strong></span>

# 1=Enabling yum plugins, 0=Disable yum plugins
# Once plugins are enabled in yum.conf, you may install yum plugins and use them.
<span style="color: #0000ff;"><strong>plugins=1</strong></span>

# Determine when repositories metedata expire after it is received.
# Note: yum-RHN-plugin doesn't honor this.
<span style="color: #0000ff;"><strong>metadata_expire=1h</strong></span>

# Some package (like kernel) can only be install and not updated
# So here we would keep 5 versions of the kernel.
# When the sixth one is installed, the oldest one will get deleted.
<span style="color: #0000ff;"><strong>installonly_limit = 5
</strong></span>
# List of packages to exclude from updates or installs.
# Uncomment below if you want to autoupdate also the kernel rpms
# Reboot is necessary to use the new kernel, once installed.
#<span style="color: #0000ff;"><strong> exclude=kernel*</strong></span>

# PUT YOUR REPOS HERE OR IN separate files named file.repo
# in /etc/yum.repos.d
#</pre>

<h3><!--more--></h3>

<h3 id="yum-repository-directory-etcyumreposd">Yum repository directory (/etc/yum.repos.d)</h3>

<p>In the â€œ/etc/yum.repos.dâ€Â  directory, we will find one file for each repository we want to use to download or install packages. In a simple RedHat installation we will have one file, name â€œrhel-debuginfo.repoâ€. You can find the content and description of this file below. RedHat standard repository seems to be hidden or hard coded somewhere (check /etc/yum directory). Centos on the other side, have explicitly place 2 files in this directory (CentOS-Base.repo and CentOS-Media.repo), one for installing and updating our system from internet and the other one from CD/DVD.</p>

<pre><strong># Section title - Can have multiple sections in the file
</strong><span style="color: #0000ff;">[rhel-debuginfo]</span>

<strong># Friendly name for the repository</strong>
<span style="color: #0000ff;">name=Red Hat Enterprise Linux $releasever - $basearch - Debug</span>

<strong># Full URL to the packages (Can be http:// frp:// or file://)</strong>
<span style="color: #0000ff;">Baseurl=ftp://ftp.redhat.com/pub/redhat/linux/enterprise/$releasever/en/os/$basearch/Debuginfo/</span>

<strong># Activate(1) or De-Activate(0) the repositor</strong>y
<span style="color: #0000ff;">enable=1</span>

<strong># Enable(1)/Disable(0) - Packages cryptographic check</strong>
<span style="color: #0000ff;">gpgcheck=1 </span>

<strong># GPG key </strong><span style="color: #000000;"><strong>used to verify RPM packages built and signed by Red Hat/Centos /Fedora</strong>
<span style="color: #0000ff;">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-releas</span>e
</span></pre>

<p>There are many additional repositories that we can subscribe for our RedHat/Centos/Fedora server. For example, there is the â€œ<a href="https://fedoraproject.org/wiki/EPEL" title="EPEL Repository">Extra Packages for Enterprise Linux (EPEL)</a>â€œ, you can find the <a href="https://fedoraproject.org/wiki/EPEL/FAQ#howtouse" title="Hot-to subscribe to EPEL">procedure for subscribing to it</a>, but basically you download and install the <a href="http://download.fedora.redhat.com/pub/epel/4/i386/repoview/epel-release.html" title="EPEL RHEL 4 Packages Page">RHEL4</a> and <a href="http://download.fedora.redhat.com/pub/epel/5/i386/repoview/epel-release.html" title="EPEL RHEL 5 Packages Page">RHEL5</a> rpm. There is also the <a href="https://rpmrepo.org/RPMforge" title="RPM Forge Site">RPMforge repository</a> where you will find packages for RedHat/Centos. Download the <a href="http://packages.sw.be/rpmforge-release/rpmforge-release-0.3.6-1.el5.rf.i386.rpm" title="RedHat/Centos5 32 Bits RPM">RedHat 5/Centos 5 rpm</a> or the <a href="http://packages.sw.be/rpmforge-release/rpmforge-release-0.3.6-1.el4.rf.i386.rpm" title="RedHat/Centos4 32 Bits RPM">RedHat 4/Centos 4 rpm</a> and follow the same procedure describe above for EPEL repository. There is also the <a href="http://dag.wieers.com/rpm/" title="Dag rpm site">DAG site</a> and you can <a href="http://dag.wieers.com/rpm/FAQ.php#B" title="Download Subscribing page">subscribe to the repository from this page</a>.</p>

<p><strong>Example, subscribing to EPEL RedHat 5 repository ;</strong></p>

<pre><span style="color: #0000ff;"><strong>GPG Repositories keys before subscribing</strong>
</span>root@rhel5:/etc/yum.repos.d# ls -l /etc/pki/rpm-gpg/
total 16
-rw-r--r-- 1 root root 1512 Mar 16 21:30 RPM-GPG-KEY-beta
-rw-r--r-- 1 root root 1504 Mar 16 21:30 RPM-GPG-KEY-CentOS-5

<span style="color: #0000ff;"><strong>Yum repository directory before</strong></span>
root@rhel5:/etc/yum.repos.d# ls -l
total 16
-rw-r--r-- 1 root root 2323 Mar 16 21:30 CentOS-Base.repo
-rw-r--r-- 1 root rootÂ  626 Mar 16 21:30 CentOS-Media.repo
root@rhel5:/etc/yum.repos.d#

<span style="color: #0000ff;"><strong>Subcribing to EPEL RedHat 5 repository</strong></span>
# rpm -Uvh http://download.fedora.redhat.com/pub/epel/5/i386/epel-release-5-3.noarch.rpm
Retrieving http://download.fedora.redhat.com/pub/epel/5/i386/epel-release-5-3.noarch.rpm
warning: /var/tmp/rpm-xfer.hoNaf4: Header V3 DSA signature: NOKEY, key ID 217521f6
Preparing...Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  ########################################### [100%]
 1:epel-releaseÂ Â Â Â Â Â Â Â Â Â  ########################################### [100%]

<span style="color: #0000ff;"><strong>Yum repository directory after subscribing</strong></span>
root@rhel5:/etc/yum.repos.d# ls -l
total 24
-rw-r--r-- 1 root root 2323 Mar 16 21:30 CentOS-Base.repo
-rw-r--r-- 1 root rootÂ  626 Mar 16 21:30 CentOS-Media.repo
-rw-r--r-- 1 root rootÂ  954 Apr 25Â  2008 <span style="color: #0000ff;">epel.repo</span>
-rw-r--r-- 1 root root 1054 Apr 25Â  2008 <span style="color: #0000ff;">epel-testing.repo
</span>
<span style="color: #0000ff;"><strong>GPG Repositories keys after subscribing</strong></span>
root@rhel5:/etc/yum.repos.d# ls -l /etc/pki/rpm-gpg/
total 20
-rw-r--r-- 1 root root 1512 Mar 16 21:30 RPM-GPG-KEY-beta
-rw-r--r-- 1 root root 1504 Mar 16 21:30 RPM-GPG-KEY-CentOS-5
-rw-r--r-- 1 root root 1698 AprÂ  3Â  2007 <span style="color: #0000ff;">RPM-GPG-KEY-EPEL
</span>root@rhel5:/etc/yum.repos.d#</pre>

<p>Always be careful when you subscribe to a new repositories, you may encounter problem on some update afterward. If you do use additional repositories, I would suggest that you activate it to download the needed packages and then deactivate it by changing the line â€œenable=1â€ to â€œenable=0â€, in the proper file in /etc/yum.repos.d directory. If you ever need again, just activate the â€œenableâ€ line.</p>

<p>In the next article, we will focus on the using the â€œyumâ€ command itself, see you soon.</p>
:ET